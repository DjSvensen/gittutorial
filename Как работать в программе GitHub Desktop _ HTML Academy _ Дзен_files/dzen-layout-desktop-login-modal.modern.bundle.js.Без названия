"use strict";(self.webpackChunklxvthoyr_zly4550amig=self.webpackChunklxvthoyr_zly4550amig||[]).push([[688],{5219:(e,t,r)=>{r.r(t),r.d(t,{LoginModal:()=>xe});var n=r(9328),o=r(5326),s=(r(7297),r(8941),r(9562),r(2363)),c=r(1401),l=r(9105),a=r.n(l),i=r(9099),u=r(9634),d=r(6392),f=r(4094),g=r(2050),m=r(3578),h=r(4369),v=r.n(h),p=r(773),R=r(40),C=r(476),b=r(6178),S=r(1300);const y=e=>{let{dragObserver:t,curtain:r,contentScrollRef:n,byStrictContent:o,contentScrollPaddingRef:s,headerContainerRef:c,calcModestPointFunc:l=H}=e;if(!t||!r||null==n||!n.current)return;let a=r.clientHeight;if(o){var i,u;const e=(null==(i=c.current)?void 0:i.clientHeight)||0,t=n.current.clientHeight+e-((null==s||null==(u=s.current)?void 0:u.paddingBottom)||0);a=Math.min(t,r.clientHeight)}return a<=l({dragObserver:t})},H=e=>{let{dragObserver:t}=e;return t.clientHeight/100*70},E=()=>{var e,t;if(null!=(e=window.top)&&e.visualViewport)return(null==(t=window.top)?void 0:t.visualViewport.height)!==window.top.innerHeight},w=56,P={"--noHeaderContentMargin":"20px"},M=1/0,F=e=>{var t,r,n;let o,{el:s,curtain:c,content:l,contentScrollRef:a,isWithHeaderRef:i,contentScrollPaddingRef:u,mode:d="auto",customContentHeight:f,footerContainerRef:g,isHandleOverContent:m,headerContainerRef:h,modestPointResolver:v=H,shouldKeepModest:p,shouldNotUseModestPoint:R}=e;o="auto"===d?y({dragObserver:s,curtain:c,contentScrollRef:a,byStrictContent:!0,contentScrollPaddingRef:u,calcModestPointFunc:v,headerContainerRef:h}):"asSmall"===d;const C=(null==(t=g.current)?void 0:t.clientHeight)||0;let b=l.clientHeight+C;var S,E;o&&a.current&&null!=(r=u.current)&&r.paddingBottom&&(b=a.current.clientHeight-(null==(S=u.current)?void 0:S.paddingBottom)+(null!=(E=u.current)&&E.paddingFromFooter?0:C));f&&(b=f);let P=null!=i&&i.current?(null==(n=h.current)?void 0:n.clientHeight)||0:20;return m&&(P=0),p?{gap:Math.max(0,s.clientHeight-v({dragObserver:s})-w),contentHeight:b,isSmall:!1}:R?{gap:Math.max(0,s.clientHeight-(b+P+w)),contentHeight:b,isSmall:!0}:{gap:Math.max(0,o?s.clientHeight-(b+P+w):s.clientHeight-v({dragObserver:s})-w),contentHeight:b,isSmall:o}},N=e=>{let{progressForModestRef:t,progress:r,footer:n,dragObserverRef:o,contentScrollPaddingRef:s,contentScrollRef:l,curtainRef:a,headerContainerRef:i,recalcHeightGap:u,recalcPaddingBottom:d,setProgress:g,curtainPositionModeRef:m,keyboardPaddingData:h,footerContainerRef:v,isFooterSticksToKeyboard:p=!0,shouldNotCloseFromFullscreen:R,isFullscreenRef:C}=e;const b=(0,f.Z)(n),S=(0,c.useRef)(r);(0,c.useEffect)((()=>{S.current=r}),[r]),(0,c.useLayoutEffect)((()=>{var e;if(b===n)return;const r=(e=>{var t;let{dragObserver:r,curtain:n,contentScrollRef:o,contentScrollPaddingRef:s,headerContainerRef:c,calcModestPointFunc:l=H}=e;if(!(r&&n&&null!=o&&o.current&&c.current))return;const a=c.current.clientHeight,i=o.current.clientHeight+a-((null==s||null==(t=s.current)?void 0:t.paddingBottom)||0);return Math.max(i,n.clientHeight)<l({dragObserver:r})})({dragObserver:o.current,curtain:a.current,contentScrollRef:l,contentScrollPaddingRef:s,headerContainerRef:i});if("fullscreen"===m.current.actual&&r&&(null==(e=s.current)||!e.paddingFromFooter)){const e=u({mode:"auto"});e&&(t.current=e)}if("small"!==m.current.actual&&"nonModest"!==m.current.actual||!r)d({isSmall:r,progress:S.current});else{d({isSmall:!1,progress:S.current});const e=u({mode:"auto"});e&&g((r=>e<r?(t.current=e,e):(t.current=r,r)))}}),[s,l,a,o,n,b,t,u,d,g,i,m]);let y=t.current-r;null!=C&&C.current&&!R&&(y=-r);let E=0;y<0&&(E=Math.max(0,Math.abs(y)));const{screenBottomPoint:w,isViewportMutated:P}=h,M={bottom:"0px"};if(p&&P&&w>0){var F;E+=w-((null==(F=v.current)?void 0:F.clientHeight)||0),M.top="0px",M.bottom=void 0}return M.transform=`translate3d(-50%,${E}px,0)`,M};var k=r(3640);const O="header__header-3t",x="header__headerContent-1I",B=e=>{let{navigationBarProps:t,isContentScrolled:r,rootRef:o}=e;return t?s.createElement("div",{className:O,ref:o},s.createElement("div",{className:x},s.createElement(k.v,(0,n.Z)({},t,{shouldShowBottomDivider:r,isBackgroundTransparent:!0})))):null};var _=r(4270),T=r(7352);const V="transition-wrapper__transitionEnter-8Z",D="transition-wrapper__transitionEnterActive-N0",L="transition-wrapper__transitionExit-2b",A=e=>{let{currentScreenId:t,children:r}=e;if(!r)return null;const n=Array.isArray(r)?s.createElement("div",null,r):r;return s.createElement(_.Z,null,s.createElement(T.Z,{classNames:{enter:V,enterActive:D,exit:L},timeout:{enter:150},key:`${t}`},n))},Z=e=>{let{contentScrollPaddingData:t,content:r,prevContent:n,footerLayout:o,prevFooterLayout:s,contentScroll:l,footerContainerRef:a,shouldBeCentered:i}=e;const[u,d]=(0,c.useState)({}),f=(0,c.useRef)(0),g=(0,c.useRef)(null);return(0,c.useEffect)((()=>{(n!==r||o!==s)&&new Promise((e=>{"undefined"!=typeof window&&requestAnimationFrame((()=>e()))})).then((()=>{if((n!==r||o!==s)&&l.current&&(g.current=l.current.getBoundingClientRect(),l.current&&g.current)){var e;const t=window.innerHeight-g.current.y-((null==(e=a.current)?void 0:e.clientHeight)||0);f.current=t,d({height:`${f.current}px`,display:"flex",flexDirection:"column",justifyContent:"center"})}}))}),[r,l,a,o,n,s,i]),i?u:(null==t?void 0:t.styles)||{}};var I=r(1754);const W={angle:NaN,type:""},K="drag-observer__contentScroll-NI",U="drag-observer__main-vq",Y="drag-observer__curtain-2-",z="drag-observer__isTouched-FD",$="drag-observer__isClosing-wL",q="drag-observer__content-1W",G="drag-observer__withHeader-2q",j="drag-observer__isContentScrolled-1k",J="drag-observer__withoutMargins-2x",Q="drag-observer__overlay-39",X="drag-observer__handle-3t",ee="drag-observer__handleMedia-3B",te="drag-observer__handleDragDisabled-y_",re="drag-observer__footer-1n",ne=z,oe=e=>{var t,r;let{isVisible:n,children:o,headerProps:l,dragDisabled:i,onChangeViewMode:u,onTransitionEnd:g,contentContainerRef:m,onStartClosing:h,setIsFullscreenRef:H,maxWidth:k,allowNonFullscreenScroll:O,footer:x,handleType:_,overlayMode:T,isOutsideClickDisabled:V,isFullscreenAlwaysAvailable:D,shouldApplyKeyboardPadding:L,isHandleOverContent:oe,closeActionRef:se,footerRef:ce,headerRef:le,modestPointResolver:ae,shouldNotCloseFromFullscreen:ie,shouldKeepModest:ue,shouldNotDragByContent:de,shouldNotUseModestPoint:fe,screenMap:ge,currentScreenId:me,footerWrapperClassName:he,forceCloseOnChangeOrientation:ve,classNameCurtain:pe="",openInFullScreen:Re}=e;const Ce=(0,c.useRef)(null),be=(0,c.useRef)(null),Se=(0,c.useRef)(null),ye=(0,c.useRef)(null),He=(0,R.e)(Se,m),Ee=(0,c.useRef)(0),we=(0,c.useRef)(0),Pe=(0,c.useRef)(!1),Me=(0,c.useRef)(!1),Fe=(0,c.useRef)(-1),Ne=(0,c.useRef)(0),ke=(0,c.useRef)(0),[Oe,xe]=(0,c.useState)(!1),Be=(0,c.useRef)(),[_e,Te]=(0,c.useState)(),Ve=(0,c.useCallback)((e=>{Be.current=e,Te(e)}),[]),De=(0,c.useRef)(null),Le=(0,R.e)(De,ce),Ae=(0,c.useRef)(null),Ze=(0,R.e)(Ae,le),Ie=(0,c.useRef)({actual:"unknown",previous:"unknown"}),We=(0,c.useCallback)((e=>{e!==Ie.current.actual&&(Ie.current={actual:e,previous:Ie.current.actual})}),[]),Ke=(0,c.useRef)({actual:"unknown",previous:"unknown"}),Ue=(0,c.useCallback)((e=>{e!==Ke.current.actual&&(Ke.current={actual:e,previous:Ke.current.actual})}),[]),[Ye,ze]=(0,c.useState)(!1),{content:$e,footerLayout:qe,headerPropsLayout:Ge,isFooterExist:je,shouldBeCentered:Je}=(e=>{let{headerProps:t,footer:r,currentScreenId:n,screenMap:o,children:l}=e;const a=(0,c.useMemo)((()=>s.createElement("div",null)),[]);if(o&&n){const e=o[n];return{headerPropsLayout:e.headerProps||t,footerLayout:e.footer||r||a,content:e.content,isFooterExist:Boolean(e.footer||r),shouldBeCentered:Boolean(e.shouldBeCentered)}}return{headerPropsLayout:t,footerLayout:r,content:l,isFooterExist:Boolean(r),shouldBeCentered:!1}})({currentScreenId:me,screenMap:ge,children:o,headerProps:l,footer:x}),Qe=Boolean(Ge),Xe=(0,C.Z)(Qe),et=(0,c.useCallback)((()=>{Pe.current=!0,h&&h()}),[h]),[tt,rt]=(0,c.useState)(!1),nt=(0,c.useRef)(tt);(0,c.useEffect)((()=>{nt.current=tt}),[tt]);const[ot,st]=(0,c.useState)(!1),ct=(0,c.useRef)(0),lt=(0,c.useRef)({contentHeight:0,isSmall:!0}),at=(0,C.Z)(je),{recalcPaddingBottom:it}=(e=>{let{contentHeightRef:t,dragObserverRef:r,contentScrollRef:n,headerContainerRef:o,isHandleOverContent:s,contentScrollPaddingRef:l,footerContainerRef:a,contentModeRef:i,updateContentPaddingData:u,isFullscreenRef:d,isFooterExistRef:f}=e;const g=l;return{recalcPaddingBottom:(0,c.useCallback)((e=>{var c,l,m;let{isSmall:h,progress:v}=e;const p=f.current&&null!=(c=a.current)&&c.clientHeight?null==(l=a.current)?void 0:l.clientHeight:0,R=d.current?0:v;let C;if(!h&&R!==M&&n.current&&null!=(m=r.current)&&m.clientHeight){var b,S,y,H,E;const e=(null==(b=g.current)?void 0:b.paddingBottom)||0,c=t.current&&(null==(S=r.current)?void 0:S.clientHeight)&&t.current-e>(null==(y=r.current)?void 0:y.clientHeight),l=n.current.clientHeight-e;let a=o.current?o.current.clientHeight:20;s&&(a=0);const d=(null==(H=r.current)?void 0:H.clientHeight)-w-a-l,f=Math.max(R,(null==(E=r.current)?void 0:E.clientHeight)-w-a-l);let m,h=c?R:f;if("modestOrBigger"===i.current.actual){const e=Math.max(0,d-R);h=0===e?h+p:e+(p-e),m=!0}C={styles:{paddingBottom:`${h}px`},paddingBottom:h,paddingFromFooter:m?p:void 0},g.current=C,u({styles:{paddingBottom:`${h}px`},paddingBottom:h,paddingFromFooter:m?p:void 0})}else C={styles:void 0,paddingBottom:void 0},g.current=C,u({styles:void 0,paddingBottom:void 0});return C}),[f,t,i,n,a,o,s,g,u,r,d])}})({progressForModest:ct.current,contentHeightRef:Ne,drawerContainerHeightRef:we,dragObserverRef:Ce,contentScrollRef:ye,contentRef:Se,contentClientHeightRef:ke,headerContainerRef:Ae,isHandleOverContent:oe,contentScrollPaddingRef:Be,footerContainerRef:De,contentModeRef:Ke,updateContentPaddingData:Ve,isFullscreenRef:nt,isFooterExistRef:at}),{progress:ut,setProgress:dt,handleClose:ft,recalcHeightGap:gt}=(e=>{let{recalcPaddingBottom:t,progressForModestRef:r,updateCurtainPositionMode:n,progressArgsRef:o,dragObserverRef:s,isVisible:l,onStartClosing:a,curtainRef:i,contentRef:u,contentScrollRef:d,isWithHeaderRef:f,contentScrollPaddingRef:g,footerContainerRef:m,isHandleOverContent:h,headerContainerRef:v,modestPointResolver:p,shouldKeepModest:R,shouldNotUseModestPoint:C,openInFullScreen:b}=e;const[S,y]=(0,c.useState)(M),H=(0,c.useRef)(0);(0,c.useEffect)((()=>{t({isSmall:!1,progress:S})}),[S,t]),(0,c.useEffect)((()=>{const{current:e}=s,{current:t}=i,{current:n}=u;if(e&&t&&n){H.current=e.clientHeight-0;const{gap:s,contentHeight:c,isSmall:l}=F({el:e,curtain:t,content:n,contentScrollRef:d,contentScrollPaddingRef:g,footerContainerRef:m,isHandleOverContent:h,headerContainerRef:v,modestPointResolver:p,shouldKeepModest:R,shouldNotUseModestPoint:C});r.current=s,o.current={contentHeight:c,isSmall:l}}}),[r,o,s,i,u,d,g,m,h,v,p,R,C]);const E=(0,c.useCallback)((()=>{const{current:e}=s;e&&(H.current=e.clientHeight-0),y(H.current),a&&a()}),[a,s]),w=(0,c.useCallback)((()=>{const{current:e}=s,{current:c}=i,{current:l}=u;if(e&&c&&l){const{gap:t,contentHeight:s,isSmall:a}=F({el:e,curtain:c,content:l,contentScrollRef:d,isWithHeaderRef:f,contentScrollPaddingRef:g,footerContainerRef:m,isHandleOverContent:h,headerContainerRef:v,modestPointResolver:p,shouldKeepModest:R,shouldNotUseModestPoint:C});o.current={contentHeight:s,isSmall:a},b?(r.current=0,n("fullscreen")):(r.current=t,n(C?0===r.current?"fullscreen":"nonModest":R||!a?"modest":"small"))}y(r.current),t({isSmall:!1,progress:r.current})}),[r,o,s,i,d,u,f,g,m,h,v,p,t,R,C,n,b]),P=(0,c.useCallback)((()=>{w()}),[w]);(0,c.useEffect)((()=>{l?P():E()}),[l,E,P]);const N=(0,c.useCallback)((function(e){let{mode:t,customContentHeight:n}=void 0===e?{}:e;const{current:c}=s,{current:l}=i,{current:a}=u;if(c&&l&&a){const{gap:e,contentHeight:s,isSmall:i}=F({el:c,curtain:l,content:a,contentScrollRef:d,isWithHeaderRef:f,contentScrollPaddingRef:g,mode:t,customContentHeight:n,footerContainerRef:m,isHandleOverContent:h,headerContainerRef:v,modestPointResolver:p,shouldKeepModest:R,shouldNotUseModestPoint:C});return r.current=e,o.current={contentHeight:s,isSmall:i},e}}),[r,o,u,d,i,s,f,g,m,h,v,p,R,C]);return{progress:S,setProgress:y,handleClose:E,handleDefaultOpen:P,recalcHeightGap:N}})({recalcPaddingBottom:it,progressForModestRef:ct,updateCurtainPositionMode:We,progressArgsRef:lt,isVisible:n,dragObserverRef:Ce,onStartClosing:et,curtainRef:be,contentRef:Se,contentScrollRef:ye,isWithHeaderRef:Xe,contentScrollPaddingRef:Be,footerContainerRef:De,isHandleOverContent:oe,headerContainerRef:Ae,modestPointResolver:ae,shouldKeepModest:ue,shouldNotUseModestPoint:fe,openInFullScreen:Re});(e=>{const{type:t}=(0,I.Z)(W),r=(0,f.Z)(t);(0,d.Z)((()=>{[r,t].includes(W.type)||r===t||e()}),[t,r])})((()=>{ve&&(ft(),rt(!1),g(!0),xe(!1))})),(0,c.useEffect)((()=>{H&&H.current&&(H.current=()=>{dt(ct.current)})}),[H,dt,ct]);const{overlayOpacity:mt}=(e=>{let t,{progress:r,isClosing:n}=e;return t=n||r===M?0:1,{overlayOpacity:t}})({progress:ut,isClosing:Pe.current}),ht=`translate3d(0,${ut===M?"100%":`${ut}px`},0)`,vt=(0,c.useRef)(0),pt=(0,c.useRef)(!1),Rt=(0,c.useRef)(!1),Ct=(0,C.Z)(ut),bt={transform:ht,maxWidth:k};(0,c.useEffect)((()=>{null==u||u(tt)}),[tt,u]),(0,c.useEffect)((()=>{const e=v()((()=>{if(ye.current&&Se.current&&Ce.current)if(Ee.current=Se.current.clientHeight,Ne.current=ye.current.scrollHeight,ke.current=ye.current.clientHeight,we.current=Ce.current.clientHeight-0,nt.current)it({isSmall:!1,progress:0});else{const e=lt.current.isSmall?"asSmall":"asNotSmall",t=gt({mode:e,customContentHeight:lt.current.contentHeight});t&&dt(t)}}),300);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[gt,dt,it,ct,fe]);const St=(0,c.useRef)(O);(0,c.useEffect)((()=>{St.current=O}),[O]);const[yt,Ht]=(0,c.useState)(!0),Et=(0,c.useRef)(!0);(0,c.useEffect)((()=>{Et.current=yt}),[yt]);const wt=(0,c.useRef)(!1),[Pt,Mt]=(0,c.useState)(!1);(0,c.useEffect)((()=>{wt.current=Pt}),[Pt]);const Ft=(0,c.useCallback)((e=>{if(de)return void e.stopPropagation();if(!vt.current){var t;Ce.current&&ye.current&&(we.current=Ce.current.clientHeight-0,Ne.current=ye.current.scrollHeight,ke.current=ye.current.clientHeight),vt.current=e.touches[0].pageY;const n=Ne.current>((null==(t=Se.current)?void 0:t.clientHeight)||0);let o;if(!St.current){var r;if(0===Ct.current||St.current)o=Boolean(n&&!(null!=(r=Se.current)&&r.scrollTop)&&Ct.current);else o=!0}pt.current=!o&&vt.current-Ct.current>120&&n}const n=e.touches[0].pageY-vt.current;n<=0&&!Me.current&&pt.current&&e.stopPropagation(),n>=0&&pt.current&&(Se.current&&Se.current.scrollTop>0?(Rt.current=!0,e.stopPropagation()):Me.current||(Fe.current=Ct.current-n))}),[Ct,de]),Nt=(0,c.useCallback)(((e,t)=>(0,S.uZ)(e+t,0,we.current)),[]);(0,c.useEffect)((()=>{if(Se.current){const e=Se.current;return e.addEventListener("touchmove",Ft,!0),()=>{e.removeEventListener("touchmove",Ft)}}}),[Se,Ft]),(0,c.useEffect)((()=>{if(Se.current){const e=Se.current,t=()=>{if(e.scrollTop===e.scrollHeight-e.offsetHeight?Mt(!0):Mt(!1),e.scrollTop>0)return st(!0),void Ht(!1);st(!1),Ht(!0)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[Se]);const kt=(0,c.useCallback)((e=>{if(Pe.current)return;-1===Fe.current&&(Fe.current=Ct.current);const{deltaY:t}=e;if(!D&&t<0&&"small"===Ie.current.actual&&"lowerThanModest"===Ke.current.actual)return;const r=Nt(Fe.current,t);return 0!==r&&xe(!0),dt(r)}),[Nt,dt,Ct,D]),Ot=(0,c.useCallback)((e=>{var t;Se.current&&!Pe.current&&Ce.current&&(ye.current&&(Ne.current=ye.current.scrollHeight,ke.current=ye.current.clientHeight),Ee.current=Se.current.clientHeight,we.current=Ce.current.clientHeight-0,null==(t=be.current)||t.classList.add(ne),Me.current=!0,kt(e))}),[kt]),xt=(0,c.useCallback)((e=>{var t;const r=Math.min(we.current-Fe.current,we.current),{pageY:n,startY:o,velocityY:s}=e,c=n-o,l=Math.max(Fe.current,0);if(Fe.current=-1,null==(t=be.current)||t.classList.remove(ne),Me.current=!1,!D&&c<0&&"small"===Ie.current.actual&&"lowerThanModest"===Ke.current.actual)return;if(!s)return;const a=Nt(l,c);let i=ct.current;const u=a-0<=i-a?0:i;if(c/r>=1&&(ft(),rt(!1),g(!0),xe(!1)),Math.abs(s)>=.25){if(c>0){if(rt(!1),0!==l)Pe.current=!0,ft();else{if("fullscreen"===Ie.current.actual&&!ie||"fullscreen"===Ie.current.actual&&0===l&&0===l&&fe&&0===ct.current)return Pe.current=!0,void ft();if("small"===Ie.current.previous&&"modestOrBigger"===Ke.current.actual){const e=gt();e&&(i=e,We("modest"))}else"modest"===Ie.current.previous?We("modest"):"small"===Ie.current.previous&&We("small");dt(i)}c>r&&(g(!0),xe(!1))}else rt(!0),We("fullscreen"),xe(!1),dt(0);return}if(c/r>=.5)return rt(!1),ft();if("fullscreen"===Ie.current.actual&&!ie&&c>=60)return Pe.current=!0,void ft();const d=0===u;return rt(d),d&&We("fullscreen"),xe(!1),dt(u)}),[Nt,ct,dt,ft,g,D,We,gt,ie,fe]),Bt=(0,c.useCallback)((()=>{vt.current=0,Rt.current=!1}),[]),_t=(0,c.useMemo)((()=>({el:Ce,onDragStart:Ot,onDrag:kt,onDragEnd:xt,isVerticalDragAllowed:!0,isDisabled:i||Pe.current||Ye,isMouseFallbackAllowed:!0,onPointerUp:Bt})),[Ot,kt,xt,i,Bt,Ye]);(0,p.gt)(_t);const Tt=(0,c.useRef)(!1),Vt=(0,c.useCallback)((e=>{if(Tt.current)return;const t=Ce.current&&!Ce.current.contains(e.target),r=De.current&&De.current.contains(e.target);V||t||r||(Pe.current=!0,ze(!0),ft(),Tt.current=!0)}),[ft,V]);(0,b.Z)(be,Vt);const Dt=(0,c.useCallback)((e=>{if("transform"===e.propertyName&&e.nativeEvent.target===be.current){var t;!Ee.current&&Se.current&&(Ee.current=Se.current.clientHeight);const e=(null==(t=Se.current)?void 0:t.clientHeight)||0,r=Ct.current>=e;g(r),xe(!1)}}),[g,Ct]);(0,c.useEffect)((()=>{se&&(se.current=()=>{rt(!1),ft()})}),[se,ft]);const Lt={};(Me.current||Oe||tt&&0!==(null==(t=Be.current)?void 0:t.paddingBottom)&&(null==(r=Be.current)||!r.paddingFromFooter))&&(Lt.overflowY="hidden");const At=(0,f.Z)($e),Zt=(0,f.Z)(qe),It=Z({contentScrollPaddingData:_e,content:$e,prevContent:At,footerLayout:qe,prevFooterLayout:Zt,contentScroll:ye,footerContainerRef:De,shouldBeCentered:Je});(0,c.useLayoutEffect)((()=>{const e=y({dragObserver:Ce.current,curtain:be.current,contentScrollRef:ye,byStrictContent:!0,contentScrollPaddingRef:Be,headerContainerRef:Ae,calcModestPointFunc:ae});Ue(e?"lowerThanModest":"modestOrBigger"),At&&$e!==At&&it({isSmall:e,progress:ct.current})}),[$e,At,Be,dt,it,Ue,We,ae,ue,fe]);const Wt=(e=>{let{contentRef:t,shouldApplyKeyboardPadding:r,footerContainerRef:n}=e;const[o,s]=(0,c.useState)(0),[l,a]=(0,c.useState)(0),[i,u]=(0,c.useState)((()=>E()));return(0,c.useEffect)((()=>{var e,n;const o=window.top||window,c=()=>{const e=E();if(u(e),null==t||!t.current)return;if(E()){if(r){var n;const e=o.innerHeight-((null==(n=o.visualViewport)?void 0:n.height)||0);t.current.style.paddingBottom=`${e}px`,s(e)}}else t.current.style.paddingBottom="",s(0);const c=o.visualViewport||{height:0,pageTop:0},l=c.height+c.pageTop;a(l)};return null==(e=o.visualViewport)||e.addEventListener("scroll",c),null==(n=o.visualViewport)||n.addEventListener("resize",c),()=>{var e,t;null==(e=o.visualViewport)||e.removeEventListener("scroll",c),null==(t=o.visualViewport)||t.removeEventListener("resize",c)}}),[t,r,n]),{appliedPadding:o,screenBottomPoint:l,isViewportMutated:i}})({shouldApplyKeyboardPadding:L,contentRef:Se,footerContainerRef:De}),Kt=N({progressForModestRef:ct,progress:ut,contentScrollPaddingRef:Be,contentScrollRef:ye,curtainRef:be,dragObserverRef:Ce,footer:qe,headerContainerRef:Ae,recalcHeightGap:gt,recalcPaddingBottom:it,setProgress:dt,curtainPositionModeRef:Ie,footerContainerRef:De,keyboardPaddingData:Wt,shouldNotCloseFromFullscreen:ie,isFullscreenRef:nt});return s.createElement("div",{className:a()(U,{[z]:Me.current,[$]:Pe.current}),ref:Ce,style:P},s.createElement("div",{className:Q,style:{opacity:"withoutOverlay"===T?0:mt},"aria-label":"Подложка для закрытия шторки"}),s.createElement("div",{className:a()(Y,pe),style:bt,ref:be,onTransitionEnd:Dt,"aria-label":"Шторка"},s.createElement("div",{className:a()(X,{[ee]:"media"===_,[te]:i}),"aria-label":"Потянуть для закрытия"}),s.createElement(A,{currentScreenId:me},s.createElement(B,{rootRef:Ze,isContentScrolled:ot,navigationBarProps:Ge})),s.createElement("div",{className:a()(q,{[G]:Qe,[j]:ot,[J]:oe}),ref:He,style:Lt},s.createElement("div",{className:K,ref:ye,style:It},s.createElement(A,{currentScreenId:me},$e)))),s.createElement("div",{className:a()(re,{[z]:Me.current}),ref:Le,style:Object.assign({},Kt,{maxWidth:k})},s.createElement("div",{className:je?he:""},s.createElement(A,{currentScreenId:me},qe))))},se="bottom-view__main-6C",ce="bottom-view__isVisible-vR",le=e=>{let{children:t,onClose:r,isVisible:n=!1,dragDisabled:o,isLockBodyScrollEnabled:l,onChangeViewMode:h,win:v,containerRef:p,contentRef:R,targetRef:C,onStartClosing:b,onOpen:S,dataTestId:y,maxWidth:H,headerProps:E,allowNonFullscreenScroll:w,footer:P,handleType:M,overlayMode:F="default",isOutsideClickDisabled:N,isFullscreenAlwaysAvailable:k,shouldApplyKeyboardPadding:O,isHandleOverContent:x,closeActionRef:B,footerRef:_,headerRef:T,modestPointResolver:V,shouldNotCloseFromFullscreen:D,shouldKeepModest:L,shouldNotDragByContent:A,shouldNotUseModestPoint:Z,shouldSkipScrollAfterClose:I,rootClassName:W,isSticky:K,screenMap:U,currentScreenId:Y,footerWrapperClassName:z,forceCloseOnChangeOrientation:$,curtainAdditionalClassName:q,openInFullScreen:G,zIndex:j=m.yo}=e;const[J,Q]=(0,c.useState)(!n),X=n&&l,[ee,te]=(0,c.useState)(!1);(0,i.N)(X,v,K,void 0,I);const re=(0,u.m)((e=>{e?(Q(!0),r(),te(!1)):ee||(te(!0),null==S||S())}));(0,d.Z)((()=>{n&&Q(!1)}),[n]);const ne=(0,f.Z)(C);return(0,c.useEffect)((()=>{C===ne||n||(Q(!0),r(),te(!1))}),[C,n,r,ne]),J&&!n?null:(Z&&(L=!1,k=!0),(0,g.createPortal)(s.createElement("div",{className:a()(se,W,{[ce]:!J||n}),ref:p,"aria-label":"Контекстное меню","data-testid":y,style:{zIndex:j}},s.createElement(oe,{contentContainerRef:R,dragDisabled:o,onChangeViewMode:h,isVisible:n,onTransitionEnd:re,onStartClosing:b,maxWidth:H,headerProps:E,allowNonFullscreenScroll:w,footer:P,handleType:M,overlayMode:F,isOutsideClickDisabled:N,isFullscreenAlwaysAvailable:k,shouldApplyKeyboardPadding:O,isHandleOverContent:x,closeActionRef:B,footerRef:_,headerRef:T,modestPointResolver:V,shouldNotCloseFromFullscreen:D,shouldKeepModest:L,shouldNotDragByContent:A,shouldNotUseModestPoint:Z,currentScreenId:Y,screenMap:U,footerWrapperClassName:z,forceCloseOnChangeOrientation:$,classNameCurtain:q,openInFullScreen:G},t)),C&&C.current||document.body))};var ae=r(7918),ie=r(1593),ue=r(1540),de=r.n(ue),fe=r(8249),ge=r.n(fe);const me=new(de())({id:"cross_2b5e--react",use:"cross_2b5e--react-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cross_2b5e--react"><path d="M7.05 5.636A1 1 0 0 0 5.636 7.05l4.95 4.95-4.95 4.95a1 1 0 0 0 1.414 1.414l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414-1.414L13.414 12l4.95-4.95a1 1 0 0 0-1.414-1.414L12 10.586l-4.95-4.95z" fill="currentColor" /></symbol>'});function he(e){return ge().add(me),s.createElement("svg",(0,n.Z)({viewBox:"0 0 24 24"},e),s.createElement("use",{xlinkHref:"#cross_2b5e--react"}))}he.displayName="SpriteSymbolComponent(cross_2b5e--react)";var ve=r(4773);const pe=e=>"modest"===e||"modest-video"===e,Re=.5625,Ce=e=>{let{el:t,viewType:r,isVerticalScreen:n,videoFrameRatio:o=Re,maxResponsiveHeightRatio:s=Re}=e;const c=t.clientWidth*o-0,l=t.clientHeight/3;return"modest"===r?Math.min(c,l):n&&"modest-video"===r?o>s?l:c:0};var be=r(130);const Se={dragToClose:{ru:"Потянуть для закрытия",_context:""},curtain:{ru:"Шторка",_context:""},curtainOverlay:{ru:"Подложка для закрытия шторки",_context:""},closeCurtain:{ru:"Закрыть шторку",_context:""}},ye=((0,be.Wh)(Se),(0,be.bN)(Se)),He=(0,ve.N)("drag-observer"),Ee="_is-touched",we=e=>{var t;let{isVisible:r,isCollapsed:n,children:o,renderHeader:l,isStickyHeader:i,isCloseButton:u,dragDisabled:d,isVerticalScreen:f,maxHeight:g,viewType:m,isNested:h,uiTheme:y,keepOverlay:H,theme:E,videoFrameRatio:w,onChangeViewMode:P,onTransitionEnd:M,contentContainerRef:F,onStartClosing:N,setIsFullscreenRef:k,maxWidth:O,classNameCurtain:x,isOutsideClickDisabled:B,isPreventContentDrag:_,offVideoFrameRatio:T}=e;const V=(0,c.useRef)(null),D=(0,c.useRef)(null),L=(0,c.useRef)(null),A=(0,c.useRef)(null),Z=(0,R.e)(L,F),I=(0,c.useRef)(0),W=(0,c.useRef)(0),K=(0,c.useRef)(!1),U=(0,c.useRef)(!1),Y=(0,c.useRef)(-1),z=(0,c.useRef)(0),$=(0,be.bU)(),[q,G]=(0,c.useState)(!1),j=(0,c.useCallback)((()=>{K.current=!0,N&&N()}),[N]),[J,Q]=(0,c.useState)(!1),[X,ee]=(0,c.useState)(!1),{progress:te,setProgress:re,handleClose:ne,progressForModestRef:oe}=(e=>{let{dragObserverRef:t,viewType:r,isVisible:n,isVerticalScreen:o,isCollapsed:s,videoFrameRatio:l,maxResponsiveHeightRatio:a,onStartClosing:i}=e;const[u,d]=(0,c.useState)(999),f=(0,c.useRef)(0),g=(0,c.useRef)(0);(0,c.useEffect)((()=>{const{current:e}=t;e&&(f.current=e.clientHeight-0,g.current=Ce({el:e,viewType:r,isVerticalScreen:o,videoFrameRatio:l,maxResponsiveHeightRatio:a}))}),[t,o,r,l,a]);const m=(0,c.useCallback)((()=>{const{current:e}=t;e&&(f.current=e.clientHeight-0),d(f.current),i&&i()}),[i,t]),h=(0,c.useCallback)((()=>{d(0)}),[]),v=(0,c.useCallback)(((e,r,n)=>{const{current:o}=t;o&&(g.current=Ce({el:o,viewType:e,isVerticalScreen:r,videoFrameRatio:n,maxResponsiveHeightRatio:a})),d(g.current)}),[t,a]),p=(0,c.useCallback)(((e,t)=>pe(e)&&t?v(e,t,l):h()),[h,v,l]);return(0,c.useEffect)((()=>{n?p(r,o):m()}),[n,m,o,p,r]),(0,c.useEffect)((()=>{pe(r)||(s?m():p())}),[s,p,m,r]),{progress:u,setProgress:d,handleClose:m,progressForModestRef:g}})({isVisible:r,isVerticalScreen:f,isCollapsed:n,viewType:m,videoFrameRatio:w,maxResponsiveHeightRatio:.666,dragObserverRef:V,onStartClosing:j});(0,c.useEffect)((()=>{k&&k.current&&(k.current=()=>{re(oe.current)})}),[k,re,oe]);const se=((null==(t=L.current)?void 0:t.clientWidth)||0)*(w||0),{overlayOpacity:ce,footerOverlayOpacity:le,opacity:ae}=(e=>{let{progress:t,progressForModest:r,viewType:n,keepOverlay:o,drawerContainerHeight:s,drawerHeight:c,videoHeight:l=0}=e;const a=t-r,i=a>0?1-(t-r)/(s-r):1,u=a<0?1-t/r:0,d="modest-video"===n?(0,S.uZ)(i,0,1):0!==t?1-(0,S.uZ)(t/Math.min(s,c),0,1):1;return{overlayOpacity:"modest-video"===n?u:o?1:d,footerOverlayOpacity:l&&"modest-video"===n?1-Math.max(t-l,0)/(s-l):0,opacity:d}})({viewType:m,keepOverlay:H,progress:te,drawerContainerHeight:W.current,drawerHeight:I.current,videoHeight:se,progressForModest:oe.current}),ie=`translate3d(0,${te}px,0)`,ue=(0,c.useRef)(0),de=(0,c.useRef)(!1),fe=(0,c.useRef)(!1),ge=(0,C.Z)(te),me={transform:ie,maxHeight:g,maxWidth:O},ve=Pe({videoFrameRatio:w}),Re=(0,c.useMemo)((()=>({top:T?"0":`calc(100vw * ${w} + 6px)`,opacity:le})),[w,le,T]);(0,c.useEffect)((()=>{pe(m)&&P&&P(J)}),[J,P,m]),(0,c.useEffect)((()=>{const e=v()((()=>{A.current&&L.current&&V.current&&(I.current=L.current.clientHeight,z.current=A.current.scrollHeight,W.current=V.current.clientHeight-0)}),300);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,c.useEffect)((()=>{L.current&&(I.current=L.current.clientHeight),V.current&&(W.current=V.current.clientHeight-0),pe(m)&&(f?Q(!1):(Y.current=-1,Q(!0)))}),[f,m,ge]);const Se=(0,c.useCallback)((e=>{if(!ue.current){var t;V.current&&A.current&&(W.current=V.current.clientHeight-0,z.current=A.current.scrollHeight),ue.current=e.touches[0].pageY;const r=z.current>W.current,n=Boolean("modest"===m&&r&&!(null!=(t=L.current)&&t.scrollTop)&&ge.current);de.current=!n&&ue.current-ge.current>120&&r&&pe(m)}const r=e.touches[0].pageY-ue.current;r<=0&&!U.current&&de.current&&e.stopPropagation(),r>=0&&de.current&&(L.current&&L.current.scrollTop>0?(fe.current=!0,e.stopPropagation()):U.current||(Y.current=ge.current-r)),r<=0&&!U.current&&!pe(m)&&e.stopPropagation(),L.current&&r>0&&!pe(m)&&(L.current.scrollTop>0||fe.current)&&(fe.current=!0,e.stopPropagation())}),[ge,m]),we=(0,c.useCallback)(((e,t)=>(0,S.uZ)(e+t,0,W.current)),[]);(0,c.useEffect)((()=>{if(L.current){const e=L.current;return e.addEventListener("touchmove",Se,!0),()=>{e.removeEventListener("touchmove",Se)}}}),[L,Se]),(0,c.useEffect)((()=>{if(L.current&&i){const e=L.current,t=()=>{e.scrollTop>0?ee(!0):ee(!1)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[L,i]);const Me=(0,c.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),Fe=(0,c.useCallback)((e=>{if(K.current)return;-1===Y.current&&(Y.current=ge.current);const{deltaY:t}=e,r=I.current,n=we(Y.current,t);return Y.current>=0&&n>=r&&ne(),re(n)}),[ne,we,re,ge]),Ne=(0,c.useCallback)((e=>{var t;L.current&&!K.current&&V.current&&(A.current&&(z.current=A.current.scrollHeight),I.current=L.current.clientHeight,W.current=V.current.clientHeight-0,null==(t=D.current)||t.classList.add(Ee),U.current=!0,Fe(e))}),[Fe]),ke=(0,c.useCallback)((e=>{var t;const r=Math.min(W.current-Y.current,W.current),{pageY:n,startY:o,velocityY:s}=e,c=n-o,l=Math.max(Y.current,0);if(Y.current=-1,null==(t=D.current)||t.classList.remove(Ee),U.current=!1,!s)return;const a=we(l,c),i=pe(m)?oe.current:0,u=a-0<=i-a?0:i;if(c/r>=1&&(ne(),Q(!1),M(!0)),!(Math.abs(s)>=.25))return c/r>=.5?(Q(!1),ne()):(Q(0===u),re(u));c>0?pe(m)?(Q(!1),0!==l?ne():re(i),c>r&&M(!0)):(ne(),c>r&&M(!0)):(Q(!0),re(0))}),[ne,re,we,M,oe,m]),Oe=(0,c.useCallback)((()=>{ue.current=0,fe.current=!1}),[]),xe=(0,c.useMemo)((()=>({el:V,onDragStart:Ne,onDrag:Fe,onDragEnd:ke,isVerticalDragAllowed:!0,isDisabled:d||K.current||q,isMouseFallbackAllowed:!0,onPointerUp:Oe})),[Ne,Fe,ke,d,Oe,q]);(0,p.gt)(xe);const Be=(0,c.useCallback)((e=>{V.current&&!V.current.contains(e.target)||B||(K.current=!0,G(!0),ne())}),[ne,B]);(0,b.Z)(D,Be);const _e=(0,c.useCallback)((e=>{"transform"===e.propertyName&&(!I.current&&L.current&&(I.current=L.current.clientHeight),M(0!==I.current&&ge.current>=I.current))}),[M,ge]);(0,c.useEffect)((()=>{const e=D.current;if(e&&_)return e.addEventListener("touchmove",Me,!0),()=>{e.removeEventListener("touchmove",Me)}}),[D,_,Me]);const Te=(0,c.useCallback)((()=>{Q(!1),ne()}),[ne,Q]);return s.createElement("div",{className:He({isNested:h,theme:E,viewType:m,isTouched:U.current,isClosing:K.current}),ref:V},s.createElement("div",{className:He("overlay"),style:{opacity:ce},"aria-label":ye.curtainOverlay($)}),s.createElement("div",{className:He("footer-overlay"),style:Re}),s.createElement("div",{className:a()(He("curtain",{viewType:m,uiTheme:y}),x),style:me,ref:D,onTransitionEnd:_e,"aria-label":ye.curtain($)},s.createElement("div",{className:He("handle"),style:{opacity:ae},"aria-label":ye.dragToClose($)}),s.createElement("div",{className:He("content",{viewType:m}),ref:Z},l?s.createElement("div",{className:He("header",{isStickyHeader:i,isContentScrolled:X})},s.createElement("div",{className:He("header-content")},l(Te)),u&&s.createElement("div",{"aria-label":ye.closeCurtain($),className:He("cross-icon-wrapper"),onClick:Te},s.createElement(he,{className:He("cross-icon")}))):null,s.createElement("div",{className:He("content-scroll"),ref:A,style:ve},o))))},Pe=e=>{let{videoFrameRatio:t}=e;return(0,c.useMemo)((()=>{if(t)return t>.666?{paddingBottom:"calc(33vh + 20px)"}:{paddingBottom:`calc(100vw * ${t} + 20px)`}}),[t])};var Me=r(6177);const Fe=(0,ve.N)("drawer"),Ne=e=>{let{children:t,renderHeader:r,isStickyHeader:n,isCloseButton:o,onClose:l,maxHeight:a,isVisible:m=!1,isNested:h,dragDisabled:v,isOutsideClickDisabled:p,isPreventContentDrag:R,isLockBodyScrollEnabled:C,theme:b=Me.DD.white,className:S,isVerticalScreen:y,onChangeViewMode:H,viewType:E,win:w,isSticky:P=!0,uiTheme:M,containerRef:F,contentRef:N,targetRef:k,isCollapsed:O,videoFrameRatio:x,onCurtainCollapsed:B,onStartClosing:_,onOpen:T,setIsFullscreenRef:V,dataTestid:D,maxWidth:L,classNameCurtain:A,shouldSkipScrollAfterClose:Z,offVideoFrameRatio:I}=e;const[W,K]=(0,c.useState)(!1),[U,Y]=(0,c.useState)(!m),z=m&&C;(0,i.N)(z,w,P,void 0,Z);const $=(0,u.m)((e=>{if(e){if(O)return void(B&&B());Y(!0),l()}else K(!1),T&&T()}));(0,c.useEffect)((()=>{O&&K(!0)}),[O]),(0,d.Z)((()=>{m&&Y(!1)}),[m]);const q=(0,f.Z)(k);return(0,c.useEffect)((()=>{k===q||m||(Y(!0),l())}),[k,m,l,q]),U&&!m?null:(0,g.createPortal)(s.createElement("div",{className:ve.N.mix(S,Fe({isVisible:!U||m})),ref:F,"aria-label":"Контекстное меню","data-testid":D},s.createElement(we,{contentContainerRef:N,theme:b,uiTheme:M,isVerticalScreen:y,maxHeight:a,dragDisabled:v,onChangeViewMode:H,renderHeader:r,isStickyHeader:n,isCloseButton:o,isOutsideClickDisabled:p,isPreventContentDrag:R,viewType:E,isVisible:m,isCollapsed:O,isNested:h,videoFrameRatio:x,onTransitionEnd:$,keepOverlay:W,onStartClosing:_,setIsFullscreenRef:V,maxWidth:L,classNameCurtain:A,offVideoFrameRatio:I},t)),k&&k.current||document.body)};var ke=r(2620);const Oe=["isVisible","handleClose","isMobileFromProps","verticalAlign","className","contentClassName","isOneTapButtonAuthEnabled","shouldUseBottomView","trapFocus","restoreFocus"],xe=(0,c.memo)((e=>{let{isVisible:t,handleClose:r,isMobileFromProps:l,verticalAlign:a,className:i,contentClassName:u,isOneTapButtonAuthEnabled:d=!0,shouldUseBottomView:f=!1,trapFocus:g,restoreFocus:m}=e,h=(0,o.Z)(e,Oe);const[v,p]=(0,c.useState)(!0),R=Boolean(l),C=a||(R?"bottom":"middle"),b=(0,c.useCallback)((()=>{p(!1)}),[]),S=s.createElement(ie.q,(0,n.Z)({className:u,isMobile:R,isOneTapButtonAuthEnabled:d,ariaLabel:"Попап авторизации",isBottomView:R,isLoginModalInCenter:!0},h));if(R){const e=[ke.D.ARTICLE_END].includes(h.type),o={isVisible:t,isLockBodyScrollEnabled:!0,onClose:r,isOutsideClickDisabled:e&&v,shouldSkipScrollAfterClose:e,onOpen:b};return f?s.createElement(le,(0,n.Z)({isSticky:!0},o),S):s.createElement(Ne,(0,n.Z)({viewType:"handle-inside",className:i},o),S)}return s.createElement(ae.u,{className:i,visible:t,onClose:r,hasCloseButton:!0,autoFocus:!1,trapFocus:g,restoreFocus:m,contentVerticalAlign:C,keepMounted:!1},S)}))}}]);
//# sourceMappingURL=https://s3-zen.mds.yandex.net/zen-eb/source-maps/prod/dzen-layout/1.29.1/dzen-layout-desktop-login-modal.modern.bundle.js.map